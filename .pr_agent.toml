# PR-Agent Configuration for Erion Raven
# Place this file in the root of your repository
# Documentation: https://github.com/Codium-ai/pr-agent

[config]
# Model configuration (using Z.ai as OpenAI-compatible provider)
model = "gpt-4o"
fallback_models = ["gpt-4o-mini"]

# Extra instructions to be added to all tools
extra_instructions = """
This is a TypeScript/JavaScript monorepo project using pnpm and Turbo.
Please focus your reviews on:
- TypeScript best practices and type safety
- React/Next.js patterns (where applicable)
- Monorepo package structure and dependencies
- Security vulnerabilities
- Performance optimizations
- Code clarity and maintainability
"""

# Public GitHub API base URL (for GitHub Actions)
# For Hugging Face deployment, this is handled by environment variables
# github_api_base_url = "https://api.github.com"

[pr_reviewer]
# Extra instructions for /review command
extra_instructions = """
Review this pull request with focus on:
- TypeScript type safety and proper typing
- React/Next.js best practices (UI components)
- API route security and validation (if applicable)
- Monorepo package dependencies and imports
- Performance considerations
- Testing coverage and quality
- Code organization within the monorepo structure

Please provide specific, actionable feedback with code examples when suggesting improvements.
"""

# Enable/disable specific review aspects
review_extra_instructions = "Focus on TypeScript type safety, React patterns, and monorepo best practices"
coverage_extra_instructions = "Check for proper test coverage of new features"

[pr_description]
# Extra instructions for /describe command
extra_instructions = """
Generate a clear, structured PR description following this format:

## Summary
[Brief 2-3 sentence summary of changes]

## Changes
- [Key change 1]
- [Key change 2]
- [etc.]

## Type of Change
- [ ] Bug fix
- [ ] New feature
- [ ] Breaking change
- [ ] Documentation update

## Testing
[Describe how changes were tested]

## Checklist
- [ ] Code follows project style guidelines
- [ ] Tests have been added/updated
- [ ] Documentation has been updated
"""

# How to publish the description (as comment vs update PR description)
publish_description_as_comment = true

[pr_improve]
# Extra instructions for /improve command
extra_instructions = """
When suggesting improvements:
- Provide concrete code examples with proper TypeScript typing
- Consider the monorepo structure and package dependencies
- Suggest modern JavaScript/TypeScript patterns
- Ensure changes are compatible with the existing codebase
"""

[pr_code_suggestions]
# Extra instructions for inline code suggestions
extra_instructions = """
Focus on:
- TypeScript type improvements
- Modern JavaScript/ES6+ patterns
- React/Next.js specific optimizations
- Performance optimizations
"""

[pr_questions]
# Extra instructions for /ask and /question commands
extra_instructions = """
When answering questions about the code:
- Consider the monorepo context and package structure
- Reference relevant TypeScript/React best practices
- Provide examples with proper typing
"""

[ai]
# AI provider settings (these can be overridden by environment variables)
# For Hugging Face Spaces deployment, use OPENAI_KEY and OPENAI_API_BASE env vars
# provider = "openai"
# model = "github-models/gpt-4o"

# Instructions for the AI to control its behavior
# For example:
# - "Be very concise and only mention critical issues."
# - "Be very thorough and analyze all the code in detail."
system_message = """
You are an expert code reviewer specializing in TypeScript, JavaScript, React, Next.js, and monorepo architectures.
You provide helpful, constructive feedback with specific examples.
You consider the context of the entire codebase when making suggestions.
"""

# Extra instructions for handling metadata
# metadata_extra_instructions = ""

[log]
# Logging configuration
log_level = "INFO"
# Log format can be "TEXT" or "JSON"
log_format = "TEXT"

# Commands that should trigger auto-feedback from pr-agent
# auto_feedback = "/review,/improve,/describe,/test,/summarize"

[docs]
# Extra instructions for /documentation command
extra_instructions = """
Generate documentation in markdown format with:
- Clear descriptions of functions and components
- TypeScript type signatures
- Usage examples
- Consider the monorepo package structure
"""

[triage]
# Extra instructions for automatically triaging pull requests
# extra_instructions = """
# Label this PR based on its content using these labels:
# - `type: bug` for bug fixes
# - `type: feature` for new features
# - `type: docs` for documentation changes
# - `type: refactor` for refactoring
# - `priority: high`, `priority: medium`, `priority: low` based on impact
# """

# Labels to apply for different types of changes
# triage_extra_instructions = """
# If the PR touches packages/ui, add 'scope: ui'
# If the PR touches packages/api, add 'scope: api'
# If the PR touches apps/web, add 'scope: web'
# """
